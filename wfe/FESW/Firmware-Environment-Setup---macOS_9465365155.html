<!DOCTYPE html>
<html>
    <head>
        <title>Firmware : Firmware Environment Setup - macOS</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware_9465365086.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Getting-Started_9465365137.html">Getting Started</a></span>
                            </li>
                                                    <li>
                                <span><a href="Intro-to-Firmware_9465365151.html">Intro to Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tool-Setup_9465365152.html">Tool Setup</a></span>
                            </li>
                                                    <li>
                                <span><a href="Advanced-Setup_9465365154.html">Advanced Setup</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Firmware : Firmware Environment Setup - macOS
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Former user</span>, last modified by <span class='editor'> Justin Vuong</span> on Oct 05, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <ol><li>Install git aliases <a class="external-link" href="https://coderwall.com/p/euwpig/a-better-git-log" rel="nofollow">https://coderwall.com/p/euwpig/a-better-git-log</a> (optional)</li><li>get the firmware repo from Bitbucket<pre><span style="color: rgb(23,43,77);">git clone <a class="external-link" href="mailto:git@bitbucket.org" rel="nofollow">git@bitbucket.org</a>:waterloohybrid/firmware.git</span></pre></li><li>git autocomplete <a class="external-link" href="https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion" rel="nofollow">https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion</a> (optional)</li><li><span class="author-d-16z86ztz122z98z81zz82zz85zunv3z82zpqfnlbxz79zn270xz73zz74zz84zyz72zdlz85zz69zz84z6gnz85zkz71zz86zn2b">Install home-brew </span><a class="external-link" href="http://brew.sh" rel="nofollow">http://brew.sh</a> (if on linux, follow the instructions here: <a class="external-link" href="https://docs.brew.sh/Homebrew-on-Linux" rel="nofollow">https://docs.brew.sh/Homebrew-on-Linux</a>)<br/><ol><li>Note: if on linux, you can skip using home-brew, and instead get openocd directly if available in your package manager. You will need version at least 0.10.0. At time of writing, on ubuntu the openocd version from the package manager isn't recent enough (0.9.0)</li></ol></li><li>Install openOCD, in terminal run the following command:<br/>brew install open-ocd<br/>brew info open-ocd<br/>then install the missing packages (indicated by red cross). For issues with brew, try &quot;brew doctor&quot;</li><li>Install <a class="external-link" href="https://developer.arm.com/-/media/Files/downloads/gnu-rm/9-2020q2/gcc-arm-none-eabi-9-2020-q2-update-mac.tar.bz2?revision=d0d318de-b746-489f-98b0-9d89648ce910&amp;hash=DB1DA90A2BC0E5A0D3FA92D4E7D2E9A6F4A2118D" rel="nofollow" style="text-decoration: none;text-align: left;">gcc-arm-none-eabi-9-2020-q2-update-mac.tar.bz2</a></li><li> Unzip the package you just installed and put it in the directory <span style="color: rgb(36,41,47);">/Applications/ARM (you may need to create this directory)</span><ol><li> in the file /etc/paths add the directory <span style="color: rgb(36,41,47);">/Applications/ARM/<strong>&lt;gcc-arm-none-eabi&gt;</strong>/bin</span><ol><li><span style="color: rgb(36,41,47);">Replace the path in the <span style="color: rgb(36,41,47);"><strong>&lt;gcc-arm-none-eabi&gt;</strong></span> with your verison of the package</span></li><li>Open a new window and enter gcc-arm-none-eabi-gcc --version If that returns a version number then you are set. Try and build the firmware repo</li></ol></li><li>Original instructions: <a class="external-link" href="https://gist.github.com/disposedtrolley/06d37e1db82b80ccf8c5d801eaa29373" rel="nofollow">https://gist.github.com/disposedtrolley/06d37e1db82b80ccf8c5d801eaa29373</a></li></ol></li></ol><pre><br/></pre><h2 id="FirmwareEnvironmentSetup-macOS-RunningFirmwareRepo">Running Firmware Repo</h2><p>The <code>firmware</code> repo is found <a class="external-link" href="https://bitbucket.org/waterloohybrid/firmware/src/main/" rel="nofollow">here</a>.</p><p>When running <code>make</code>, it looks for the <code>python</code> binary, which is pointed to Python 2.7 on the VM. However, you probably want to use Python 3.8. If Python 3.8 isn't installed on your machine, install it by running</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">brew install python3.8</pre>
</div></div><p>Then, link the <code>python</code> binary to Python 3.8 by running</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo ln -s -f /usr/local/bin/python3.8 /usr/local/bin/python</pre>
</div></div><p>Before moving on make sure that typing &quot;python&quot; in the terminal starts Python3</p><p><br/></p><p>If you're having issues with running make for the BMU, it may be due to having the wrong version of <code>cantools</code>. Make sure you have the right version of <code>cantools</code> as listed in the <a class="external-link" href="https://bitbucket.org/waterloohybrid/firmware/src/main/common/requirements.txt" rel="nofollow">requirements.txt</a>. If you want to only change the cantools version you have (let's say you want version 35.0.0), run</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">pip3 uninstall cantools
pip3 install cantools==35.0.0</pre>
</div></div><p>Make sure you're in the same directory as requirements.txt for the above to work (firmware/common)</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">pip3 install -r requirements.txt</pre>
</div></div><p><br/></p><p>In your terminal enter</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">python

import cantools</pre>
</div></div><p>If it launches python3 without errors then you are set. Otherwise, you will need to update the path outputted by &quot;which python&quot; to point to the same thing as the output of &quot;which python3&quot;</p><p>If you're having issues trying to make the firmware repo on Mac and you're getting a python error, consider following this:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="900" loading="lazy" src="attachments/9465365155/43236163747.png?width=900" data-image-src="attachments/9465365155/43236163747.png" data-unresolved-comment-count="0" data-linked-resource-id="43236163747" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2022-9-28_17-29-1.png" data-base-url="https://uwaterloo.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9465365155" data-linked-resource-container-version="25" data-media-id="c159b999-64f0-41ab-bbf1-877b9caedf1a" data-media-type="file"></span></p><p>The new macs that come with Mac OS 12 or later don't come with Python 2.x so this might be required.</p><p>Walk through the page below to get the linter set up:</p><p><a href="Linter_9614462113.html" data-linked-resource-id="9614462113" data-linked-resource-version="19" data-linked-resource-type="page">Linter</a></p><p class="auto-cursor-target" style="text-align: left;">Config your git<strong><span> </span>(replace value in &lt;&gt; with your own info)</strong></p><div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;" border="0" cellpadding="0" cellspacing="0"><colgroup><col/></colgroup><tbody style="text-align: left;"><tr style="text-align: left;"><td class="code confluenceTd" style="text-align: left;"><div class="container" style="text-align: left;" title="Hint: double-click to select code"><div class="line number1 index0 alt2" style="text-align: left;"><code class="java plain" style="text-align: left;">git config --global core.autocrlf input</code></div><div class="line number2 index1 alt1" style="text-align: left;"><code class="java plain" style="text-align: left;">git config --global user.email<span> </span></code><code class="java string" style="text-align: left;">&quot;&lt;Your email here&gt;&quot;</code></div><div class="line number3 index2 alt2" style="text-align: left;"><code class="java plain" style="text-align: left;">git config --global <a class="external-link" href="http://user.name" rel="nofollow">user.name</a><span> </span></code><code class="java string" style="text-align: left;">&quot;&lt;Your name here&gt;&quot;</code></div></div></td></tr></tbody></table></div><p><br/></p><p>If you are able to successfully run the command below you are all done!</p><pre><span style="color: rgb(23,43,77);">git clone <a class="external-link" href="mailto:git@bitbucket.org" rel="nofollow">git@bitbucket.org</a>:waterloohybrid/firmware.git</span></pre>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9465365155/43236163747.png">image2022-9-28_17-29-1.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Oct 15, 2022 01:32</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
