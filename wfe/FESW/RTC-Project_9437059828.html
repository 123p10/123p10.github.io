<!DOCTYPE html>
<html>
    <head>
        <title>Firmware : RTC Project</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware_9465365086.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware-Projects_9571009451.html">Firmware Projects</a></span>
                            </li>
                                                    <li>
                                <span><a href="9465365100.html">Firmware Projects Archive (2017-2020)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware-Sensor-Projects_9437059755.html">Firmware Sensor Projects</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Firmware : RTC Project
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Former user</span>, last modified by <span class='editor'> Justin Vuong</span> on Jul 25, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout two-left-sidebar" data-layout="two-left-sidebar">
<div class="cell aside" data-type="aside">
<div class="innerCell">
<h2 id="RTCProject-ProjectProperties">Project Properties</h2><div class='plugin-tabmeta-details'><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" class="confluenceTh">Project ID</th><td colspan="1" class="confluenceTd">FW-14</td></tr><tr><th class="confluenceTh">Status</th><td class="confluenceTd"><img class="wysiwyg-unknown-macro" src="plugins/servlet/confluence/placeholder/unknown-macro"/></td></tr><tr><th colspan="1" class="confluenceTh">Upcoming Deadline</th><td colspan="1" class="confluenceTd"><time datetime="2017-09-01" class="date-past">01 Sep 2017</time> </td></tr><tr><th colspan="1" class="confluenceTh">Project Deadline</th><td colspan="1" class="confluenceTd"><time datetime="2017-09-01" class="date-past">01 Sep 2017</time> </td></tr><tr><th class="confluenceTh">Manager</th><td class="confluenceTd"><br/></td></tr><tr><th class="confluenceTh">Project Lead</th><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">Support</th><td colspan="1" class="confluenceTd"><p><br/></p></td></tr></tbody></table></div></div></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="RTCProject-ProjectDeliverablesandTimeline">Project Deliverables and Timeline</h2><p><button class='aui-button create-from-template-button'data-space-key='FESW' href='https://uwaterloo.atlassian.net/wiki?templateId=917549&amp;spaceKey=FESW&amp;newSpaceKey=FESW'data-template-id='917549'disabled='true' >New Deliverable</button> <span style="color: rgb(255,0,0);">** Change the template name to &quot;<em>subteam_name </em>Project Deliverable&quot; or just &quot;Project Deliverable&quot; **</span></p><p><div class="table-wrap"><table class="aui metadata-summary-macro FW14" data-cql="label = &quot;FW14&quot; and space = currentSpace ( )" data-headings="Deadline,Responsible,Status,Priority,Type" data-first-column-heading="Title" data-count-comments="false" data-count-likes="false"data-total-pages="1" data-page-size="1000" data-sort-by="Deadline" data-reverse-sort="false" data-blueprint-present="false" data-current-space-key="FESW" data-current-content-id="9437059828"><thead><tr><th>Title</th><th>Deadline</th><th>Responsible</th><th>Status</th><th>Priority</th><th>Type</th></tr></thead><tbody><tr><td class="title" data-content-id="9437059828"><a href="/wiki/spaces/FESW/pages/9437059828/RTC+Project">RTC Project</a></td><td>&nbsp;</td><td>&nbsp;</td><td><img class="wysiwyg-unknown-macro" src="plugins/servlet/confluence/placeholder/unknown-macro"/></td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div> <span style="color: rgb(255,0,0);">** Change the label to the correct project number **</span></p><p><em><br/></em></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="RTCProject-ProjectDescription">Project Description</h2><p>Outlining the use of the RTC on the STM32F072RB nucleo board.</p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="RTCProject-SupportingInformation,ProjectDetails">Supporting Information, Project Details</h2><p><a class="external-link" href="http://www.st.com/content/ccc/resource/technical/document/user_manual/3b/8d/46/57/b7/a9/49/b4/DM00099401.pdf/files/DM00099401.pdf/jcr:content/translations/en.DM00099401.pdf" rel="nofollow">Hardware Configuration Reference</a></p><p><a class="external-link" href="http://embedded-lab.com/blog/stm32s-internal-rtc/" rel="nofollow">General RTC Information</a></p><p><a class="external-link" href="http://www.st.com/content/ccc/resource/technical/document/application_note/7a/9c/de/da/84/e7/47/8a/DM00025071.pdf/files/DM00025071.pdf/jcr:content/translations/en.DM00025071.pdf" rel="nofollow">STM Guide to RTCs</a></p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="RTCProject-RequirementsandConsiderations">Requirements and Considerations</h2><ul><li>Outline the requirements that need to be met for successful completion</li></ul><p><br/></p><p>Relevant Rules</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Rule Number</th><th class="confluenceTh">Rule Description</th></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><p><br/></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="RTCProject-ProgressOutlineandDocumentation">Progress Outline and Documentation</h2><p><strong>General Information</strong></p><ul><li>Most ICs are time-dependent, require Real Time Clocks (RTCs) to keep time</li><li>Time is usually kept by crystal oscillators. The faster the oscillator, the faster the MCU is able to perform operations and transfer data, and the more power the oscillator consumes.</li><li>The RTC should be powered by an alternate energy source, in order for it to be able to run while the rest of the system is off</li><li>Based on the clock source selected on STM32CubeMX, the nucleo is able to send three types of signals: Alarm IT ('wakes up' the system after shut down), Overflow IT (resets the timer), Second IT (information about what time it is at a given time)</li></ul><p><br/></p><p><strong>Internal RTC (LSI, HSI)</strong></p><ul><li>Advantage: require no additional hardware support</li><li>32-bit programmable counter for long-term measurement (before reset)</li><li>Core consists of a group of programmable counters divided into two modules:<ol><li>RTC Prescaler Module Generates a programmable base of one second (TR_CLK) by using a programmable divider (can be set in the Clock Configuration tab of the CubeMX program)</li><li>32-bit wide programmable counter that is used to keep count of seconds </li></ol></li><li>Needs battery backup on the VBAT pin to hold data</li></ul><p>Mechanisms to charge source when VDD is available:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" loading="lazy" src="attachments/9437059828/9437060462.png?height=250" data-image-src="attachments/9437059828/9437060462.png" data-unresolved-comment-count="0" data-linked-resource-id="9437060462" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2017-10-27 0:12:33.png" data-base-url="https://uwaterloo.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9437059828" data-linked-resource-container-version="3" data-media-id="72f81120-bceb-4106-a519-d9590ea5f439" data-media-type="file"></span></p><p><strong>External RTC (HSE, LSE, OSC 32 kHz Supply)</strong></p><ul><li>It is possible to solder a crystal on the X3 portion of the nucleo, however, a compatible crystal was not found in Digikey</li></ul><p><strong>RTC Configuration</strong></p><ul><li>No additional software configuration necessary other than RTC clock source selection on STM32CubeMX</li><li>Note: The RTC clock should be at least 4 times slower than PCLK1</li><li>Built-in module for RTC (requires no additional hardware):<br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" loading="lazy" src="attachments/9437059828/9437060437.png?height=250" data-image-src="attachments/9437059828/9437060437.png" data-unresolved-comment-count="0" data-linked-resource-id="9437060437" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2017-10-27 0:29:24.png" data-base-url="https://uwaterloo.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9437059828" data-linked-resource-container-version="3" data-media-id="85e05f93-a415-4af5-ae12-699e4cf1b7b6" data-media-type="file"></span></li></ul><p><br/></p><p><br/></p><p><br/></p></div>
</div>
</div>
</div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9437059828/9437060460.png">image2017-10-27 0:3:33.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9437059828/9437060459.png">Signal Diagram.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9437059828/9437060462.png">image2017-10-27 0:12:33.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9437059828/9437060437.png">image2017-10-27 0:29:24.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Oct 15, 2022 01:32</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
