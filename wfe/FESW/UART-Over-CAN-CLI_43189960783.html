<!DOCTYPE html>
<html>
    <head>
        <title>Firmware : UART Over CAN CLI</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware_9465365086.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Documentation_9513894334.html">Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="Board-Specific-Documentation_9567701653.html">Board Specific Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="Beaglebone_9595029852.html">Beaglebone</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Firmware : UART Over CAN CLI
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Justin Vuong</span>, last modified by <span class='editor'> Aryan Gajelli</span> on Oct 04, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 id="UARTOverCANCLI-Overview">Overview</h2><p>This tool aims to simplify the approach when trying to grab data from the cars boards. Using the UartOverCAN CLI tool you can use the inbuilt RTOS CLI over the beaglebone to communicate with the the following modules:</p><ul><li><p>VCU</p></li><li><p>BMU</p></li><li><p>PDU</p></li><li><p>DCU (needs needs update on specific cli tag used in RTOS</p></li></ul><p>Additionally the underlying UartOverCanInterface class can be used in further projects to communicate with the boards.</p><h2 id="UARTOverCANCLI-Technicalities">Technicalities</h2><h3 id="UARTOverCANCLI-IDsandcorrespondingCLItagsusedforeachboard">IDs and corresponding CLI tags used for each board</h3><div class="table-wrap"><table data-layout="default" data-local-id="e2532074-b678-4198-9559-6adac5fa3e78" class="confluenceTable"><colgroup><col style="width: 226.67px;"/><col style="width: 226.67px;"/><col style="width: 226.67px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Board</strong></p></th><th class="confluenceTh"><p><strong>ID</strong></p></th><th class="confluenceTh"><p><strong>CLI Tag</strong></p></th></tr><tr><td class="confluenceTd"><p>VCU</p></td><td class="confluenceTd"><p><code>0x01</code></p></td><td class="confluenceTd"><p><code>vcu_F7 &gt;</code></p></td></tr><tr><td class="confluenceTd"><p>BMU</p></td><td class="confluenceTd"><p><code>0x02</code></p></td><td class="confluenceTd"><p><code>bmu &gt;</code></p></td></tr><tr><td class="confluenceTd"><p>PDU</p></td><td class="confluenceTd"><p><code>0x04</code></p></td><td class="confluenceTd"><p><code>pdu &gt;</code></p></td></tr><tr><td class="confluenceTd"><p>DCU</p></td><td class="confluenceTd"><p><code>0x08</code></p></td><td class="confluenceTd"><p><code>None</code></p></td></tr></tbody></table></div><h3 id="UARTOverCANCLI-KnownIssues/bugs">Known Issues/bugs</h3><p>The BMU periodically sends out a heartbeat containing information of errors occurred. There is presently a simple filter that checks for the starting words: “PEC Rate” and discards this output for the CLI. This may fail if the text is changed in the boards firmware. </p><p>A more robust method is required to check these outputs for filtering unnecessary data.</p><p /><p>NOTE: The PEC Rate can still be accessed by other programs, it is simply parsed out for UartCLI</p><h2 id="UARTOverCANCLI-UseCase">Use Case</h2><p>A general format to using the CLI tool is as follows:</p><ul><li><p>Launch tool on beaglebone using python</p></li><li><p>Send commands (Ex. get brake info from vcu):</p></li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: Confluence" data-theme="Confluence">&gt;&gt;&gt; Choose board: vcu&gt;
&gt;&gt;&gt; vcu&gt; getBrake

Brake 2.0004

&gt;&gt;&gt; vcu&gt;</pre>
</div></div><ul><li><p>To switch boards:</p></li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&gt;&gt;&gt; vcu&gt; bmu&gt; # switch board to bmu
&gt;&gt;&gt; bmu&gt; help # board now switched

help:
 Lists all the registered commands


heap &lt;min|cur&gt;:
  Outputs the &lt;min|cur&gt; free heap space
... # output continues</pre>
</div></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Oct 15, 2022 02:51</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
