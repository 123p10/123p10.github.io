<!DOCTYPE html>
<html>
    <head>
        <title>Firmware : Embedded C++</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware_9465365086.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Documentation_9513894334.html">Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware-Development-Documentation_9569468780.html">Firmware Development Documentation</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Firmware : Embedded C++
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Former user</span> on Jul 03, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="EmbeddedC++-Resources">Resources</h1><p><a class="external-link" href="https://bitbashing.io/embedded-cpp.html" rel="nofollow">https://bitbashing.io/embedded-cpp.html</a></p><p><a class="external-link" href="https://godbolt.org/" rel="nofollow">https://godbolt.org/</a><span style="color: rgb(0,0,0);"> (View how compiler translates to assembly)</span></p><p><a class="external-link" href="https://stackoverflow.com/questions/2226252/embedded-c-to-use-stl-or-not" rel="nofollow">https://stackoverflow.com/questions/2226252/embedded-c-to-use-stl-or-not</a><br/><br/><a class="external-link" href="https://stackoverflow.com/questions/3853382/stl-in-embedded-environment" rel="nofollow">https://stackoverflow.com/questions/3853382/stl-in-embedded-environment</a><br/><br/><a class="external-link" href="https://stackoverflow.com/questions/9612588/stl-within-embedded-system-with-very-limited-memory" rel="nofollow">https://stackoverflow.com/questions/9612588/stl-within-embedded-system-with-very-limited-memory</a><br/><br/><a class="external-link" href="https://stackoverflow.com/questions/20841414/should-stdvectors-be-used-extensively-for-embedded-systems" rel="nofollow">https://stackoverflow.com/questions/20841414/should-stdvectors-be-used-extensively-for-embedded-systems</a><br/><br/><a class="external-link" href="https://www.etlcpp.com/" rel="nofollow">https://www.etlcpp.com</a><br/><br/><a class="external-link" href="https://www.embedded.com/design/programming-languages-and-tools/4438660" rel="nofollow">https://www.embedded.com/design/programming-languages-and-tools/4438660</a><br/><span style="color: rgb(0,0,0);">/Modern-C--in-embedded-systems---Part-1--Myth-and-Reality</span></p><h1 id="EmbeddedC++-Don&#39;tDo">Don't Do</h1><ul><li>Use static variables in functions if they are used in multiple threads<ul><li>If using static variables at all, need <span style="color: rgb(34,34,34);">-fno-threadsafe-statics to avoid using mutexes for statics</span></li></ul></li></ul><ul><li class="auto-cursor-target"><span style="color: rgb(34,34,34);">Can override new and delete, eg:</span></li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: cpp; gutter: false; theme: Confluence" data-theme="Confluence">void operator delete(void* p)
{
    DIE(&quot;delete called on pointer %p (was an object heap-allocated?)&quot;, p);
}

// Same as above, just a C++14 specialization.
// (See http://en.cppreference.com/w/cpp/memory/new/operator_delete)
void operator delete(void* p, size_t t)
{
    DIE(&quot;delete called on pointer %p, size %zu&quot;, p, t);
}

</pre>
</div></div><ul><li>Use the following C++ compiler flags to avoid using exceptions, and rtti (can use rtti but adds a fair amount of code)<ul><li>-fno-exceptions, -fno-non-call-exceptions, -fno-use-cxa-atexit, -fno-rtti, -std=c++11</li></ul></li><li>If not using RTTI, can't use pure virtual functions/classes</li><li>Can try using:<ul style="margin-left: 1.0em;"><li><p><code class="highlighter-rouge">-finline-small-functions</code>, which inlines functions whenever the compiler thinks the function body contains fewer instructions than the code needed to call it.</p></li><li><p><code class="highlighter-rouge">-findirect-inlining</code>, which runs additional inlining passes. For example, if <code class="highlighter-rouge">main()</code> calls <code class="highlighter-rouge">a()</code>and <code class="highlighter-rouge">a()</code> calls <code class="highlighter-rouge">b()</code>, this compiler could fold the body of <code class="highlighter-rouge">a()</code> into <code class="highlighter-rouge">main()</code>, then notice that <code class="highlighter-rouge">b()</code> is also a good candidate for inlining and fold it in. Serious improvements can be gained through such second-order effects.</p></li></ul></li></ul><p><br/></p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Oct 15, 2022 02:51</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
