<!DOCTYPE html>
<html>
    <head>
        <title>Firmware : Ultrasonic Sensor</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware_9465365086.html">Firmware</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware-Projects_9571009451.html">Firmware Projects</a></span>
                            </li>
                                                    <li>
                                <span><a href="9465365100.html">Firmware Projects Archive (2017-2020)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Firmware-Sensor-Projects_9437059755.html">Firmware Sensor Projects</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Firmware : Ultrasonic Sensor
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Former user</span>, last modified on Oct 27, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout two-left-sidebar" data-layout="two-left-sidebar">
<div class="cell aside" data-type="aside">
<div class="innerCell">
<h2 id="UltrasonicSensor-ProjectProperties">Project Properties</h2><div class='plugin-tabmeta-details'><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" class="confluenceTh">Project ID</th><td colspan="1" class="confluenceTd">FW-16</td></tr><tr><th class="confluenceTh">Status</th><td class="confluenceTd"><img class="wysiwyg-unknown-macro" src="plugins/servlet/confluence/placeholder/unknown-macro"/></td></tr><tr><th colspan="1" class="confluenceTh">Upcoming Deadline</th><td colspan="1" class="confluenceTd"><time datetime="2017-09-01" class="date-past">01 Sep 2017</time> </td></tr><tr><th colspan="1" class="confluenceTh">Project Deadline</th><td colspan="1" class="confluenceTd"><time datetime="2017-09-01" class="date-past">01 Sep 2017</time> </td></tr><tr><th class="confluenceTh">Manager</th><td class="confluenceTd"> </td></tr><tr><th class="confluenceTh">Project Lead</th><td class="confluenceTd"><a class="confluence-userlink user-mention" data-username="6155f7e2289a54006ad6f347" data-account-id="6155f7e2289a54006ad6f347" href="https://uwaterloo.atlassian.net/wiki/people/6155f7e2289a54006ad6f347?ref=confluence" target="_blank" data-base-url="https://uwaterloo.atlassian.net/wiki">Former user (Deleted)</a></td></tr><tr><th colspan="1" class="confluenceTh">Support</th><td colspan="1" class="confluenceTd"><p> </p></td></tr></tbody></table></div></div></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="UltrasonicSensor-ProjectDeliverablesandTimeline">Project Deliverables and Timeline</h2><p><button class='aui-button create-from-template-button'data-space-key='FESW' href='https://uwaterloo.atlassian.net/wiki?templateId=917549&amp;spaceKey=FESW&amp;newSpaceKey=FESW'data-template-id='917549'disabled='true' >New Deliverable</button></p><p><div class="table-wrap"><table class="aui metadata-summary-macro FW16" data-cql="label = &quot;FW16&quot; and space = currentSpace ( )" data-headings="Deadline,Responsible,Status,Priority,Type" data-first-column-heading="Title" data-count-comments="false" data-count-likes="false"data-total-pages="1" data-page-size="1000" data-sort-by="Deadline" data-reverse-sort="false" data-blueprint-present="false" data-current-space-key="FESW" data-current-content-id="9437059836"><thead><tr><th>Title</th><th>Deadline</th><th>Responsible</th><th>Status</th><th>Priority</th><th>Type</th></tr></thead><tbody><tr><td class="title" data-content-id="9437059836"><a href="/wiki/spaces/FESW/pages/9437059836/Ultrasonic+Sensor">Ultrasonic Sensor</a></td><td>&nbsp;</td><td>&nbsp;</td><td><img class="wysiwyg-unknown-macro" src="plugins/servlet/confluence/placeholder/unknown-macro"/></td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div> </p><p><em><br/></em></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="UltrasonicSensor-ProjectDescription">Project Description</h2><ul><li style="list-style-type: none;background-image: none;"><ul><li>Outline hardware requirements for ultra-sonic sensor</li><li>Design schematic</li><li>Build and test schematic</li><li>Code the component for the STM boards</li></ul></li></ul></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="UltrasonicSensor-SupportingInformation,ProjectDetails">Supporting Information, Project Details</h2><p><a class="external-link" href="http://education.rec.ri.cmu.edu/content/electronics/boe/ultrasonic_sensor/1.html" rel="nofollow">http://education.rec.ri.cmu.edu/content/electronics/boe/ultrasonic_sensor/1.html</a> (How an ultrasonic sensor works)</p><p><a class="external-link" href="https://www.progressiveautomations.com/ca/lc-217?gclid=CjwKCAjwssvPBRBBEiwASFoVd6kpADBxiWGhb_W3Z3JRwD22TMbcmjG43oOP7ROh0bYEZk9e1VgGDRoCu4AQAvD_BwE" rel="nofollow">https://www.progressiveautomations.com/ca/lc-217?gclid=CjwKCAjwssvPBRBBEiwASFoVd6kpADBxiWGhb_W3Z3JRwD22TMbcmjG43oOP7ROh0bYEZk9e1VgGDRoCu4AQAvD_BwE</a> (One of the decent alternatives to the HC-SR04 module)</p><p><a class="external-link" href="http://www.f15ijp.com/2012/09/arduino-ultrasonic-sensor-hc-sr04-or-hy-srf05/" rel="nofollow">http://www.f15ijp.com/2012/09/arduino-ultrasonic-sensor-hc-sr04-or-hy-srf05/</a> (Good comparison between the HC-SR04 and the HY-SRF05)</p><p><a class="external-link" href="http://howtomechatronics.com/tutorials/arduino/ultrasonic-sensor-hc-sr04/" rel="nofollow">http://howtomechatronics.com/tutorials/arduino/ultrasonic-sensor-hc-sr04/</a> (How to use sensor with an arduino)</p><p><a class="external-link" href="https://www.simonmartin.ch/resources/stm32/dl/STM32%20Tutorial%2001%20-%20GPIO%20Operations%20using%20HAL%20(and%20FreeRTOS).pdf" rel="nofollow">https://www.simonmartin.ch/resources/stm32/dl/STM32%20Tutorial%2001%20-%20GPIO%20Operations%20using%20HAL%20(and%20FreeRTOS).pdf</a> (Configuring the STM boards using HAL)</p><p><a class="external-link" href="http://www.st.com/content/ccc/resource/technical/document/application_note/group0/91/01/84/3f/7c/67/41/3f/DM00236305/files/DM00236305.pdf/jcr:content/translations/en.DM00236305.pdf" rel="nofollow">http://www.st.com/content/ccc/resource/technical/document/application_note/group0/91/01/84/3f/7c/67/41/3f/DM00236305/files/DM00236305.pdf/jcr:content/translations/en.DM00236305.pdf</a> (Configuring the timer on the STM boards)</p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="UltrasonicSensor-RequirementsandConsiderations">Requirements and Considerations</h2><h3 id="UltrasonicSensor-Requirements:">Requirements:</h3><ul><li>Part needs to be relatively cheap and accessible </li><li>Needs to have a range beyond 2 meters, and minimum detection of 2 cm</li></ul><h3 id="UltrasonicSensor-Criteria:">Criteria:</h3><ul><li>Tolerance to slightly angled objects</li><li>Obstacle detection</li></ul><p> </p><p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="UltrasonicSensor-ProgressOutlineandDocumentation">Progress Outline and Documentation</h2><h3 id="UltrasonicSensor-Schematic">Schematic</h3><ul><li>Pretty much all of the &quot;hobbyist&quot; ultrasonic sensors on the market right now interface with micro controllers the same way, so the a general schematic for the HC-SR04 should work for almost any ultrasonic sensor.</li><li>*Note that some ultrasonic sensors only have 3 pins, 1 Vin, 1 GND, and 1 for Signal. In this case, the signal pin acts as both the trigger pin and the echo pin, and only needs to be connected to a single gpio pin.<br/><br/></li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" loading="lazy" src="attachments/9437059836/9437060450.png?height=250" data-image-src="attachments/9437059836/9437060450.png" data-unresolved-comment-count="0" data-linked-resource-id="9437060450" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="Ultrasonic Arduino.PNG" data-base-url="https://uwaterloo.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9437059836" data-linked-resource-container-version="11" data-media-id="f126c2bc-a96e-46ac-95b1-ac38b45aa1df" data-media-type="file"></span></p><ul><li>The schematic for the nucleo board would look almost identical, with the D9 and D8 pins replaced by any two DI/O pins on the board.</li></ul><h3 id="UltrasonicSensor-PartComparison">Part Comparison</h3><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Part</th><th class="confluenceTh">Price</th><th class="confluenceTh">Range/Accuracy</th></tr><tr><td class="confluenceTd">HC-SR04</td><td class="confluenceTd">~$3.50</td><td class="confluenceTd"><p>2cm-400cm range / ~3mm accuracy</p></td></tr><tr><td colspan="1" class="confluenceTd">HY-SRF05</td><td colspan="1" class="confluenceTd">~$4.50</td><td colspan="1" class="confluenceTd">2cm-450cm range / ~2mm accuracy</td></tr><tr><td colspan="1" class="confluenceTd">LC-217</td><td colspan="1" class="confluenceTd">~$3.50</td><td colspan="1" class="confluenceTd">2cm-400cm range / accuracy not listed</td></tr></tbody></table></div><h3 id="UltrasonicSensor-Set-Up/Programming">Set-Up/Programming</h3><p>In order to use the ultrasonic sensor, a 10us 5V signal needs to be sent to the trigger pin in order to start the ultrasonic pulse. The ultrasonic sensor will send a pulse out, and at the same time will send a signal to the D8 pin until the echo comes back to the the sensor. By timing how long this signals lasts, we can figure out the distance of the object using the formula 2*distance = (speed of sound) / (length of pulse).</p><p>The Arduino library makes it pretty easy to set this up, and one can get the sensor working quite quickly</p><p>Setting this up with the nucleo boards may be more difficult, as one has to use the HAL library to initialize and send/read signals to/from the sensor, and one also needs to set up a timer manually. </p><p> </p><p> </p><p> </p><p> </p><p> </p></div>
</div>
</div>
</div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9437059836/9437060453.png">Ultrasonic Arduino.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9437059836/9437060450.png">Ultrasonic Arduino.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Oct 15, 2022 01:33</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
